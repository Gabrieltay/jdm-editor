import{h as F,m as ae,O as ie,r as le,P as ce,Q as de,R as ue,S as pe,C as R,c as P,U as me,u as U,V as ge,W as fe,i as ve,X as xe,Y as ye,Z as be,o as he,A as K,j as c,T as M}from"./index-cEm7Zbb8.js";import{A as Ce,E as X,a as we,p as $,e as _,u as Oe,b as Ee,I as Pe,P as je,H as Se,D as ke}from"./useDrop-BusYVyUD.js";import{r as s,R as A}from"./index-CDs2tPxN.js";import{c as W,C as $e}from"./ce-OG--LQx1.js";import{_ as Y}from"./extends-CCbyfPlC.js";import"./index-7f_Nov5Q.js";import{B as H,c as _e}from"./button-CiSirhIM.js";const E=e=>e?typeof e=="function"?e():e:null,Re=e=>{const{componentCls:n,popoverColor:r,titleMinWidth:t,fontWeightStrong:o,innerPadding:a,boxShadowSecondary:i,colorTextHeading:l,borderRadiusLG:u,zIndexPopup:m,titleMarginBottom:p,colorBgElevated:g,popoverBg:x,titleBorderBottom:y,innerContentPadding:C,titlePadding:b}=e;return[{[n]:Object.assign(Object.assign({},le(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:m,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":g,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:x,backgroundClip:"padding-box",borderRadius:u,boxShadow:i,padding:a},[`${n}-title`]:{minWidth:t,marginBottom:p,color:l,fontWeight:o,borderBottom:y,padding:b},[`${n}-inner-content`]:{color:r,padding:C}})},ce(e,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${n}-content`]:{display:"inline-block"}}}]},Ne=e=>{const{componentCls:n}=e;return{[n]:de.map(r=>{const t=e[`${r}6`];return{[`&${n}-${r}`]:{"--antd-arrow-background-color":t,[`${n}-inner`]:{backgroundColor:t},[`${n}-arrow`]:{background:"transparent"}}}})}},Te=e=>{const{lineWidth:n,controlHeight:r,fontHeight:t,padding:o,wireframe:a,zIndexPopupBase:i,borderRadiusLG:l,marginXS:u,lineType:m,colorSplit:p,paddingSM:g}=e,x=r-t,y=x/2,C=x/2-n,b=o;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:i+30},ue(e)),pe({contentRadius:l,limitVerticalRadius:!0})),{innerPadding:a?0:12,titleMarginBottom:a?0:u,titlePadding:a?`${y}px ${b}px ${C}px`:0,titleBorderBottom:a?`${n}px ${m} ${p}`:"none",innerContentPadding:a?`${g}px ${b}px`:0})},G=F("Popover",e=>{const{colorBgElevated:n,colorText:r}=e,t=ae(e,{popoverBg:n,popoverColor:r});return[Re(t),Ne(t),ie(t,"zoom-big")]},Te,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Ie=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Be=(e,n,r)=>!n&&!r?null:s.createElement(s.Fragment,null,n&&s.createElement("div",{className:`${e}-title`},E(n)),s.createElement("div",{className:`${e}-inner-content`},E(r))),De=e=>{const{hashId:n,prefixCls:r,className:t,style:o,placement:a="top",title:i,content:l,children:u}=e;return s.createElement("div",{className:P(n,r,`${r}-pure`,`${r}-placement-${a}`,t),style:o},s.createElement("div",{className:`${r}-arrow`}),s.createElement(me,Object.assign({},e,{className:n,prefixCls:r}),u||Be(r,i,l)))},ze=e=>{const{prefixCls:n,className:r}=e,t=Ie(e,["prefixCls","className"]),{getPrefixCls:o}=s.useContext(R),a=o("popover",n),[i,l,u]=G(a);return i(s.createElement(De,Object.assign({},t,{prefixCls:a,hashId:l,className:P(r,u)})))},Z=ze;var qe=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Me=e=>{let{title:n,content:r,prefixCls:t}=e;return s.createElement(s.Fragment,null,n&&s.createElement("div",{className:`${t}-title`},E(n)),s.createElement("div",{className:`${t}-inner-content`},E(r)))},We=s.forwardRef((e,n)=>{var r,t;const{prefixCls:o,title:a,content:i,overlayClassName:l,placement:u="top",trigger:m="hover",children:p,mouseEnterDelay:g=.1,mouseLeaveDelay:x=.1,onOpenChange:y,overlayStyle:C={}}=e,b=qe(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:d}=s.useContext(R),f=d("popover",o),[O,j,S]=G(f),I=d(),k=P(l,j,S),[B,D]=U(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),v=(w,N)=>{D(w,!0),y==null||y(w,N)},h=w=>{w.keyCode===xe.ESC&&v(!1,w)},z=w=>{v(w)};return O(s.createElement(ge,Object.assign({placement:u,trigger:m,mouseEnterDelay:g,mouseLeaveDelay:x,overlayStyle:C},b,{prefixCls:f,overlayClassName:k,ref:n,open:B,onOpenChange:z,overlay:a||i?s.createElement(Me,{prefixCls:f,title:a,content:i}):null,transitionName:fe(I,"zoom-big",b.transitionName),"data-popover-inject":!0}),ve(p,{onKeyDown:w=>{var N,q;s.isValidElement(p)&&((q=p==null?void 0:(N=p.props).onKeyDown)===null||q===void 0||q.call(N,w)),h(w)}})))}),Q=We;Q._InternalPanelDoNotUseOrYouWillBeFired=Z;const Ae=Q,He=e=>{const{componentCls:n,iconCls:r,antCls:t,zIndexPopup:o,colorText:a,colorWarning:i,marginXXS:l,marginXS:u,fontSize:m,fontWeightStrong:p,colorTextHeading:g}=e;return{[n]:{zIndex:o,[`&${t}-popover`]:{fontSize:m},[`${n}-message`]:{marginBottom:u,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${r}`]:{color:i,fontSize:m,lineHeight:1,marginInlineEnd:u},[`${n}-title`]:{fontWeight:p,color:g,"&:only-child":{fontWeight:"normal"}},[`${n}-description`]:{marginTop:l,color:a}},[`${n}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:u}}}}},Ve=e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}},J=F("Popconfirm",e=>He(e),Ve,{resetStyle:!1});var Le=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const ee=e=>{const{prefixCls:n,okButtonProps:r,cancelButtonProps:t,title:o,description:a,cancelText:i,okText:l,okType:u="primary",icon:m=s.createElement(X,null),showCancel:p=!0,close:g,onConfirm:x,onCancel:y,onPopupClick:C}=e,{getPrefixCls:b}=s.useContext(R),[d]=ye("Popconfirm",be.Popconfirm),f=E(o),O=E(a);return s.createElement("div",{className:`${n}-inner-content`,onClick:C},s.createElement("div",{className:`${n}-message`},m&&s.createElement("span",{className:`${n}-message-icon`},m),s.createElement("div",{className:`${n}-message-text`},f&&s.createElement("div",{className:P(`${n}-title`)},f),O&&s.createElement("div",{className:`${n}-description`},O))),s.createElement("div",{className:`${n}-buttons`},p&&s.createElement(H,Object.assign({onClick:y,size:"small"},t),i||(d==null?void 0:d.cancelText)),s.createElement(Ce,{buttonProps:Object.assign(Object.assign({size:"small"},_e(u)),r),actionFn:x,close:g,prefixCls:b("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},l||(d==null?void 0:d.okText))))},Fe=e=>{const{prefixCls:n,placement:r,className:t,style:o}=e,a=Le(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=s.useContext(R),l=i("popconfirm",n),[u]=J(l);return u(s.createElement(Z,{placement:r,className:P(l,t),style:o,content:s.createElement(ee,Object.assign({prefixCls:l},a))}))},Ue=Fe;var Ke=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Xe=s.forwardRef((e,n)=>{var r,t;const{prefixCls:o,placement:a="top",trigger:i="click",okType:l="primary",icon:u=s.createElement(X,null),children:m,overlayClassName:p,onOpenChange:g,onVisibleChange:x}=e,y=Ke(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:C}=s.useContext(R),[b,d]=U(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),f=(v,h)=>{d(v,!0),x==null||x(v),g==null||g(v,h)},O=v=>{f(!1,v)},j=v=>{var h;return(h=e.onConfirm)===null||h===void 0?void 0:h.call(void 0,v)},S=v=>{var h;f(!1,v),(h=e.onCancel)===null||h===void 0||h.call(void 0,v)},I=(v,h)=>{const{disabled:z=!1}=e;z||f(v,h)},k=C("popconfirm",o),B=P(k,p),[D]=J(k);return D(s.createElement(Ae,Object.assign({},he(y,["title"]),{trigger:i,placement:a,onOpenChange:I,open:b,ref:n,overlayClassName:B,content:s.createElement(ee,Object.assign({okType:l,icon:u},e,{prefixCls:k,close:O,onConfirm:j,onCancel:S})),"data-popover-inject":!0}),m))}),te=Xe;te._InternalPanelDoNotUseOrYouWillBeFired=Ue;const Ye=te;var Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};const Ze=Ge;var Qe=function(n,r){return s.createElement(K,Y({},n,{ref:r,icon:Ze}))},Je=s.forwardRef(Qe);const et=Je;var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};const nt=tt;var rt=function(n,r){return s.createElement(K,Y({},n,{ref:r,icon:nt}))},ot=s.forwardRef(rt);const st=ot,at=e=>{const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch(r){console.error("Unable to copy to clipboard",r)}document.body.removeChild(n)},bt=async e=>{window.isSecureContext&&navigator.clipboard?await navigator.clipboard.writeText(e):at(e)},ht=async()=>{try{return navigator.clipboard.readText()}catch{return""}},it=(e,n,r)=>n.split(".").reduce((t,o)=>t&&t[o]?t[o]:r||null,e),V=A.createContext({}),L=(e={})=>({id:crypto.randomUUID(),key:"",value:"",...e}),ne=({children:e})=>{const n=s.useMemo(()=>we(r=>({configurable:!0,disabled:!1,addRowAbove:(t=0)=>{r($(o=>(o.expressions.splice(t,0,L()),o)))},addRowBelow:t=>{r($(o=>(t=t??o.expressions.length-1,o.expressions.splice(t+1,0,L()),o)))},expressions:[],setExpressions:t=>{r({expressions:t})},swapRows:(t,o)=>{r($(a=>{const[i]=a.expressions.splice(t,1);return a.expressions.splice(o,0,i),a}))},removeRow:t=>{r($(o=>(o.expressions.splice(t,1),o)))},updateRow:(t,o)=>{r($(a=>(a.expressions[t]={...a.expressions[t],...o},a)))}})),[]);return c.jsx(V.Provider,{value:n,children:e})};function T(e,n=_){return A.useContext(V)(e,n)}const re=()=>A.useContext(V);ne.__docgenInfo={description:"",methods:[],displayName:"ExpressionStoreProvider"};const lt=({value:e,onChange:n,defaultValue:r=[],configurable:t=!0,disabled:o=!1})=>{const a=s.useRef(!1),i=re(),{setExpressions:l,expressions:u}=T(({setExpressions:m,expressions:p})=>({setExpressions:m,expressions:p}));return s.useEffect(()=>{i.setState({configurable:t,disabled:o})},[t,o]),s.useEffect(()=>{if(n)return i.subscribe((m,p)=>{_(m.expressions,p.expressions)||n==null||n(m.expressions)})},[i,n]),s.useEffect(()=>{a.current&&e&&!_(e,u)&&l(e)},[e]),s.useEffect(()=>{e?l(e):r&&l(r),a.current=!0},[]),null},oe=({expression:e,index:n})=>{const r=s.useRef(null),{updateRow:t,removeRow:o,swapRows:a,disabled:i,configurable:l}=T(({updateRow:d,removeRow:f,swapRows:O,disabled:j,configurable:S})=>({updateRow:d,removeRow:f,swapRows:O,disabled:j,configurable:S})),u=d=>{t(n,d)},m=()=>{o(n)},[{isDropping:p,direction:g},x]=Oe({accept:"row",collect:d=>{var f;return{isDropping:d.isOver({shallow:!0}),direction:(((f=d.getDifferenceFromInitialOffset())==null?void 0:f.y)||0)>0?"down":"up"}},drop:d=>{a(d.index,n)}}),[{isDragging:y},C,b]=Ee({canDrag:l&&!i,item:()=>({...e,index:n}),type:"row",collect:d=>({isDragging:d.isDragging()})});return b(x(r)),c.jsxs("div",{ref:r,className:W("expression-list-item","expression-list__item",p&&g==="down"&&"dropping-down",p&&g==="up"&&"dropping-up"),style:{opacity:y?.5:1},children:[c.jsx("div",{ref:C,className:"expression-list-item__drag","aria-disabled":!l||i,children:c.jsx(st,{})}),c.jsx("div",{children:c.jsx(Pe,{placeholder:"Key",disabled:!l||i,value:e==null?void 0:e.key,onChange:d=>u({key:d.target.value}),autoComplete:"off"})}),c.jsxs("div",{className:"expression-list-item__code",children:[c.jsx($e,{placeholder:"Expression",maxRows:6,disabled:i,value:e==null?void 0:e.value,onChange:d=>u({value:d})}),c.jsx(ct,{expression:e})]}),c.jsx("div",{children:c.jsx(Ye,{title:"Remove selected row?",okText:"Remove",onConfirm:m,disabled:!l||i,children:c.jsx(H,{type:"text",icon:c.jsx(et,{}),danger:!0,disabled:!l||i})})})]})},ct=({expression:e})=>{const{trace:n}=T(({traceData:r})=>{var t;return{trace:(t=it(r,e.key,void 0))==null?void 0:t.result}});return n?c.jsx("div",{className:"expression-list-item__resultOverlay",children:c.jsxs(M.Text,{children:["= ",n]})}):null};oe.__docgenInfo={description:"",methods:[],displayName:"ExpressionItem",props:{expression:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  id: string;
  key: string;
  value: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"key",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}},description:""},index:{required:!0,tsType:{name:"number"},description:""}}};const se=({})=>{const{expressions:e,addRowBelow:n,configurable:r,disabled:t}=T(({expressions:o,addRowBelow:a,configurable:i,disabled:l})=>({expressions:o,addRowBelow:a,configurable:i,disabled:l}),_);return c.jsxs("div",{className:"expression-list",children:[c.jsxs("div",{className:W("expression-list__item","expression-list__item--heading"),children:[c.jsx("div",{}),c.jsx(M.Text,{type:"secondary",children:"Key"}),c.jsx(M.Text,{type:"secondary",children:"Expression"}),c.jsx("div",{})]}),(e||[]).map((o,a)=>c.jsx(oe,{expression:o,index:a},o.id)),r&&!t&&c.jsx("div",{className:W("expression-list__item"),children:c.jsx(H,{className:"expression-list__button",icon:c.jsx(je,{}),type:"dashed",onClick:()=>n(),children:"Add row"})})]})};se.__docgenInfo={description:"",methods:[],displayName:"ExpressionList"};const dt=({manager:e,traceData:n,...r})=>{const[t,o]=s.useState(!1),a=s.useRef(null);s.useEffect(()=>{o(!0)},[]);const i=s.useMemo(()=>e?{manager:e}:{backend:Se,options:{rootElement:a.current}},[a.current,e]);return c.jsx("div",{ref:a,children:a.current&&c.jsx(ke,{...i,children:c.jsxs(ne,{children:[c.jsx(lt,{...r}),c.jsx(se,{}),c.jsx(ut,{traceData:n})]})})})},ut=({traceData:e})=>{const n=re();return s.useEffect(()=>{const r=n.getState();_(r,e)||n.setState({traceData:e})},[e]),null};dt.__docgenInfo={description:"",methods:[],displayName:"Expression",props:{manager:{required:!1,tsType:{name:"DragDropManager"},description:""},traceData:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ result: unknown }",signature:{properties:[{key:"result",value:{name:"unknown",required:!0}}]}}],raw:"Record<string, { result: unknown }>"},description:""},configurable:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},defaultValue:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  key: string;
  value: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"key",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"ExpressionEntry[]"},description:""},value:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  key: string;
  value: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"key",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"ExpressionEntry[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ExpressionEntry[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  key: string;
  value: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"key",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"ExpressionEntry[]"},name:"value"}],return:{name:"void"}}},description:""}}};export{et as D,dt as E,Ae as P,bt as c,ht as p};
